<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Career Guidance</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
        }
        
        .navbar {
            background: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            font-weight: 600;
            color: white !important;
        }
        
        .nav-link {
            color: rgba(255,255,255,0.9) !important;
            font-weight: 500;
        }
        
        .nav-link:hover {
            color: white !important;
        }
        
        .user-info {
            color: white;
            font-size: 14px;
        }
        
        .main-content {
            padding: 30px 0;
        }
        
        .welcome-card {
            background: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .welcome-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .welcome-card h1 {
            font-weight: 600;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .welcome-card p {
            opacity: 0.9;
            margin-bottom: 0;
            position: relative;
            z-index: 1;
        }
        
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #8B5CF6, #3B82F6);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover::before {
            transform: scaleX(1);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .feature-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            margin-bottom: 20px;
            position: relative;
        }
        
        .feature-icon.quiz {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        }
        
        .feature-icon.roadmap {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }
        
        .feature-icon.opportunities {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
        }
        
        .feature-icon.chat {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
        }
        
        .feature-card h3 {
            font-weight: 600;
            margin-bottom: 10px;
            color: #1f2937;
        }
        
        .feature-card p {
            color: #6b7280;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .btn-feature {
            background: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
            border: none;
            border-radius: 10px;
            color: white;
            padding: 10px 20px;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .btn-feature:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
            color: white;
        }
        
        .stats-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .stats-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        
        .stats-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #8B5CF6;
            margin-bottom: 5px;
        }
        
        .stats-label {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
        }
        
        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            color: white;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #EF4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .recent-activity {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid #e5e7eb;
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 16px;
            color: white;
        }
        
        .activity-content h6 {
            margin: 0;
            font-weight: 600;
            color: #1f2937;
        }
        
        .activity-content p {
            margin: 0;
            font-size: 14px;
            color: #6b7280;
        }
        
        .progress-bar-custom {
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6, #3B82F6);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="../../index.html">
                <i class="fas fa-brain me-2"></i>
                Career Guidance
            </a>
            
            <div class="navbar-nav ms-auto">
                <div class="user-info me-3">
                    Welcome, <span id="userName">User</span>!
                </div>
                <a href="#" class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-1"></i>
                    Logout
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container main-content">
        <!-- Welcome Card -->
        <div class="welcome-card">
            <h1>Welcome back, <span id="userNameWelcome">User</span>! ðŸ‘‹</h1>
            <p>Ready to continue your career journey? Let's explore new opportunities together.</p>
        </div>

        <!-- Features Grid -->
        <div class="row">
            <div class="col-lg-6 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon quiz">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <h3>Career Quiz</h3>
                    <p>Take our comprehensive career assessment quiz to discover your strengths, interests, and ideal career paths.</p>
                    <a href="quiz.html" class="btn-feature">Start Quiz</a>
                </div>
            </div>
            
            <div class="col-lg-6 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon roadmap">
                        <i class="fas fa-route"></i>
                    </div>
                    <h3>Learning Roadmap</h3>
                    <p>Get personalized learning paths and skill development recommendations for your chosen career.</p>
                    <a href="roadmap.html" class="btn-feature">View Roadmap</a>
                </div>
            </div>
            
            <div class="col-lg-6 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon opportunities">
                        <i class="fas fa-briefcase"></i>
                        <span class="notification-badge" id="jobNotifications">3</span>
                    </div>
                    <h3>Job Opportunities</h3>
                    <p>Explore current job opportunities and career prospects in your field of interest.</p>
                    <a href="opportunities.html" class="btn-feature">Browse Jobs</a>
                </div>
            </div>
            
            <div class="col-lg-6 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon chat">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>AI Assistant</h3>
                    <p>Chat with our AI career counselor for personalized advice and guidance.</p>
                    <a href="chat.html" class="btn-feature">Start Chat</a>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="row mt-5">
            <div class="col-12">
                <h3 class="mb-4">Your Progress</h3>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stats-card">
                    <div class="stats-number" id="quizCount">0</div>
                    <div class="stats-label">Quizzes Completed</div>
                    <div class="progress-bar-custom">
                        <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stats-card">
                    <div class="stats-number" id="roadmapProgress">0%</div>
                    <div class="stats-label">Roadmap Progress</div>
                    <div class="progress-bar-custom">
                        <div class="progress-fill" id="roadmapProgressBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stats-card">
                    <div class="stats-number" id="jobsApplied">0</div>
                    <div class="stats-label">Jobs Applied</div>
                    <div class="progress-bar-custom">
                        <div class="progress-fill" id="jobsProgress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stats-card">
                    <div class="stats-number" id="chatSessions">0</div>
                    <div class="stats-label">Chat Sessions</div>
                    <div class="progress-bar-custom">
                        <div class="progress-fill" id="chatProgress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity">
            <h4 class="mb-4">Recent Activity</h4>
            <div id="activityList">
                <!-- Activity items will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // User data and progress tracking
        let userProgress = {
            quizCount: 0,
            roadmapProgress: 0,
            jobsApplied: 0,
            chatSessions: 0,
            lastActivity: []
        };

        // Check if user is logged in
        function checkAuth() {
            const user = localStorage.getItem('user');
            if (!user) {
                alert('Please log in to access the dashboard');
                window.location.href = 'login.html';
                return false;
            }
            
            try {
                const userData = JSON.parse(user);
                if (!userData.id || !userData.username || !userData.email) {
                    console.error('Invalid user data structure');
                    localStorage.removeItem('user');
                    localStorage.removeItem('token');
                    alert('Session expired. Please log in again.');
                    window.location.href = 'login.html';
                    return false;
                }
                
                document.getElementById('userName').textContent = userData.username;
                document.getElementById('userNameWelcome').textContent = userData.username;
                
                // Load user progress from localStorage
                loadUserProgress();
                return true;
            } catch (e) {
                console.error('Error parsing user data:', e);
                localStorage.removeItem('user');
                localStorage.removeItem('token');
                alert('Session error. Please log in again.');
                window.location.href = 'login.html';
                return false;
            }
        }
        
        // Load user progress
        function loadUserProgress() {
            const savedProgress = localStorage.getItem('userProgress');
            if (savedProgress) {
                userProgress = JSON.parse(savedProgress);
            } else {
                // Initialize with some realistic data
                userProgress = {
                    quizCount: Math.floor(Math.random() * 3) + 1,
                    roadmapProgress: Math.floor(Math.random() * 40) + 10,
                    jobsApplied: Math.floor(Math.random() * 5),
                    chatSessions: Math.floor(Math.random() * 8) + 2,
                    lastActivity: generateMockActivity()
                };
                localStorage.setItem('userProgress', JSON.stringify(userProgress));
            }
            
            updateStats();
            updateActivityList();
        }
        
        // Generate mock activity data
        function generateMockActivity() {
            const activities = [
                { type: 'quiz', text: 'Completed Career Assessment Quiz', time: '2 hours ago', icon: 'fas fa-question-circle', color: '#10B981' },
                { type: 'roadmap', text: 'Started Learning Path: Web Development', time: '1 day ago', icon: 'fas fa-route', color: '#F59E0B' },
                { type: 'job', text: 'Applied for Frontend Developer position', time: '2 days ago', icon: 'fas fa-briefcase', color: '#EF4444' },
                { type: 'chat', text: 'Had a chat session with AI Counselor', time: '3 days ago', icon: 'fas fa-comments', color: '#8B5CF6' }
            ];
            
            return activities.slice(0, Math.floor(Math.random() * 3) + 2);
        }
        
        // Update statistics display
        function updateStats() {
            document.getElementById('quizCount').textContent = userProgress.quizCount;
            document.getElementById('roadmapProgress').textContent = userProgress.roadmapProgress + '%';
            document.getElementById('jobsApplied').textContent = userProgress.jobsApplied;
            document.getElementById('chatSessions').textContent = userProgress.chatSessions;
            
            // Update progress bars
            document.getElementById('quizProgress').style.width = Math.min(userProgress.quizCount * 20, 100) + '%';
            document.getElementById('roadmapProgressBar').style.width = userProgress.roadmapProgress + '%';
            document.getElementById('jobsProgress').style.width = Math.min(userProgress.jobsApplied * 25, 100) + '%';
            document.getElementById('chatProgress').style.width = Math.min(userProgress.chatSessions * 10, 100) + '%';
        }
        
        // Update activity list
        function updateActivityList() {
            const activityList = document.getElementById('activityList');
            activityList.innerHTML = '';
            
            userProgress.lastActivity.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';
                activityItem.innerHTML = `
                    <div class="activity-icon" style="background: ${activity.color}">
                        <i class="${activity.icon}"></i>
                    </div>
                    <div class="activity-content">
                        <h6>${activity.text}</h6>
                        <p>${activity.time}</p>
                    </div>
                `;
                activityList.appendChild(activityItem);
            });
        }
        
        // Logout function
        function logout() {
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            localStorage.removeItem('userProgress');
            window.location.href = 'login.html';
        }
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
        });
    </script>
</body>
</html>
